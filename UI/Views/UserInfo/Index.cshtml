
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>添加用户</title>
    <link href="~/layui/css/layui.css" rel="stylesheet" />
    <style>
        body{
            padding:15px 0 0 0;
        }
    </style>
</head>
<body>
    <div>
        <form class="layui-form" method="post" action="">
            <div class="layui-form-item">
                <label class="layui-form-label">用户名</label>
                <div class="layui-input-inline">
                    <input type="text" name="AccountName" required lay-verify="required" placeholder="请输入用户名" autocomplete="on" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">密码</label>
                <div class="layui-input-inline">
                    <input type="password" name="AccountPwd" required lay-verify="required|pass" placeholder="请输入密码" autocomplete="off" class="layui-input">
                </div>
                <div class="layui-form-mid layui-word-aux"></div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">重复密码</label>
                <div class="layui-input-inline">
                    <input type="password" name="AccountPwd" required lay-verify="required|pass|repetition" placeholder="请确认密码" autocomplete="off" class="layui-input">
                </div>
                <div class="layui-form-mid layui-word-aux"></div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">姓名</label>
                <div class="layui-input-inline">
                    <input type="text" name="RealName" required lay-verify="required" placeholder="请输入姓名" autocomplete="off" class="layui-input">
                </div>
                <div class="layui-form-mid layui-word-aux"></div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">性别</label>
                <div class="layui-input-block">
                    <input type="radio" name="Sex" value="男" title="男" checked>
                    <input type="radio" name="Sex" value="女" title="女">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">手机号码</label>
                <div class="layui-input-inline">
                    <input type="text" name="MPhone" required lay-verify="required|phone" placeholder="请输入手机号码" autocomplete="off" class="layui-input">
                </div>
                <div class="layui-form-mid layui-word-aux"></div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">用户状态</label>
                <div class="layui-input-block">
                    <input type="checkbox" name="Status" lay-skin="switch" lay-text="正常|锁定" checked>
                </div>
            </div>

            <div class="layui-form-item">
                <div class="layui-input-block">
                    <button class="layui-btn" lay-submit lay-filter="formDemo">立即提交</button>
                    <button type="reset" class="layui-btn layui-btn-primary">重置</button>
                </div>
            </div>
        </form>
    </div>
    <script src="~/Scripts/jquery-1.10.2.min.js"></script>
    <script src="~/layui/layui.all.js"></script>

    <script>
        layui.use('form', function () {
            var form = layui.form;
            //自定义验证规则
            form.verify({
                pass: [/^[\S]{6,12}$/, '密码必须6到12位，且不能出现空格'],
                repetition: function (value, item) {
                    var pass = $('[name=AccountPwd]:first').val();
                    if (value != pass) {
                        return '两次密码输入不一致!';
                    }
                }
            })

            //监听提交
            form.on('submit(formDemo)', function (data) {
                //layer.msg(JSON.stringify(data.field));
                //return false;

                if (data.field.Status == "on") {
                    data.field.Status = true;
                } else {
                    data.field.Status = false;
                }
                if (data.field.Sex == '男') {
                    data.field.Sex = true;
                } else {
                    data.field.Sex = false;
                }
                $.ajax({
                    url: '/UserInfo/AddAccount',
                    data: data.field,
                    type: 'post',
                    success: function (data) {
                        if (data.msg == 'ok') {
                            layer.msg('添加成功', 2000);
                        }
                    },
                    error: function (data) {
                        layer.msg('网络请求错误', 2000);
                    }
                })
                console.log(123);
               
            });
        });
    </script>
</body>
</html>
